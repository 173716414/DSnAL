## 工厂模式

### 抽象工厂模式：

抽象⼯⼚模式也是⼀种创建型设计模式，提供了⼀个创建⼀系列相关或相互依赖对象的接⼝，⽽⽆需指定它们具体的类 。

在⼯⼚⽅法模式中，每个具体⼯⼚只负责创建单⼀的产品。但是如果有多类产品呢，⽐如说“⼿机”，⼀个品牌的⼿机有⾼端机、中低端机之分，这些具体的产品都需要建⽴⼀个单独的⼯⼚类，但是它们都是相互关联的，都共同属于同⼀个品牌，这就可以使⽤到【抽象⼯⼚模式】。  

抽象⼯⼚模式可以确保⼀系列相关的产品被⼀起创建，这些产品能够相互配合使⽤，再举个例⼦，有⼀些家具，⽐如沙发、茶⼏、椅⼦，都具有古典⻛格的和现代⻛格的，抽象⼯⼚模式可以将⽣产现代⻛格的家具放在⼀个⼯⼚类中，将⽣产古典⻛格的家具放在另⼀个⼯⼚类中，这样每个⼯⼚类就可以⽣产⼀系列的家具。  

### 基本结构

抽象⼯⼚模式包含多个抽象产品接⼝，多个具体产品类，⼀个抽象⼯⼚接⼝和多个具体⼯⼚，每个具体⼯⼚负责创建⼀组相关的产品。

1. 抽象产品接⼝ AbstractProduct : 定义产品的接⼝，可以定义多个抽象产品接⼝，⽐如说沙发、椅⼦、茶⼏都是抽象产品。
2. 具体产品类 ConcreteProduct : 实现抽象产品接⼝，产品的具体实现，古典⻛格和沙发和现代⻛格的沙发都是具体产品。
3. 抽象⼯⼚接⼝ AbstractFactory : 声明⼀组⽤于创建产品的⽅法，每个⽅法对应⼀个产品。
4. 具体⼯⼚类 ConcreteFactory ： 实现抽象⼯⼚接⼝，负责创建⼀组具体产品的对象，在本例中，⽣产古典⻛格的⼯⼚和⽣产现代⻛格的⼯⼚都是具体实例。

![抽象工厂](img/抽象工厂.png)

### 应⽤场景

​		抽象⼯⼚模式能够保证⼀系列相关的产品⼀起使⽤，并且在不修改客户端代码的情况下，可以⽅便地替换整个产品系列。但是当需要增加新的产品类时，除了要增加新的具体产品类，还需要修改抽象⼯⼚接⼝及其所有的具体⼯⼚类，扩展性相对较差。因此抽象⼯⼚模式特别适⽤于⼀系列相关或相互依赖的产品被⼀起创建的情况，典型的应⽤场景是使⽤抽象⼯⼚模式来创建与不同数据库的连接对象。

### 简单⼯⼚、⼯⼚⽅法、抽象⼯⼚的区别

1. 简单⼯⼚模式：⼀个⼯⼚⽅法创建所有具体产品
2. ⼯⼚⽅法模式：⼀个⼯⼚⽅法创建⼀个具体产品
3. 抽象⼯⼚模式：⼀个⼯⼚⽅法可以创建⼀类具体产品



## 建造者模式  

建造者模式（也被成为⽣成器模式），是⼀种创建型设计模式，软件开发过程中有的时候需要创建很复杂的对象，⽽建造者模式的主要思想是将对象的构建过程分为多个步骤，并为每个步骤定义⼀个抽象的接⼝。具体的构建过程由实现了这些接⼝的具体建造者类来完成。 同时有⼀个指导者类负责协调建造者的⼯作，按照⼀定的顺序或逻辑来执⾏构建步骤，最终⽣成产品。  

建造者模式有下⾯⼏个关键⻆⾊：

1. 产品 Product ：被构建的复杂对象, 包含多个组成部分。
2. 抽象建造者 Builder : 定义构建产品各个部分的抽象接⼝和⼀个返回复杂产品的⽅法 getResult
3. 具体建造者 Concrete Builder ：实现抽象建造者接⼝，构建产品的各个组成部分，并提供⼀个⽅法返回最终的产品。
4. 指导者 Director ：调⽤具体建造者的⽅法，按照⼀定的顺序或逻辑来构建产品。

使⽤场景使⽤建造者模式有下⾯⼏处优点：

- 使⽤建造者模式可以将⼀个复杂对象的构建与其表示分离， 通过将构建复杂对象的过程抽象出来，可以使客户端代码与具体的构建过程解耦
- 同样的构建过程可以创建不同的表示，可以有多个具体的建造者(相互独⽴），可以更加灵活地创建不同组合的对象。对应的，建造者模式适⽤于复杂对象的创建，当对象构建过程相对复杂时可以考虑使⽤建造者模式，但是当产品的构建过程发⽣变化时，可能需要同时修改指导类和建造者类，这就使得重构变得相对困难。

建造者模式在现有的⼯具和库中也有着⼴泛的应⽤，⽐如JUnit 中的测试构建器 TestBuilder 就采⽤了建造者模式，⽤于构建测试对象。